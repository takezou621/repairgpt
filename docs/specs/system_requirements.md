# RepairGPT システム要件定義書

## 1. 概要

### 1.1 プロジェクト目的
RepairGPTは、消費者向け電子機器の修理支援を目的としたAIチャットボットシステムです。ユーザーが抱える修理問題に対して、画像認識と大規模言語モデルを組み合わせた診断・修理ガイダンスを提供します。

### 1.2 対象デバイス
- **Phase 1**: Nintendo Switch, PlayStation 5, iPhone
- **Phase 2**: その他のゲーム機、スマートフォン、PC

### 1.3 システム構成
```
[Frontend (Streamlit)] ← → [Backend API] ← → [LLM Services]
                                 ↓
                          [Data Storage]
                                 ↓
                          [External APIs]
```

## 2. 機能要件

### 2.1 コア機能

#### 2.1.1 テキストベース診断
- **入力**: デバイス種類、症状説明
- **出力**: 診断結果、修理手順、必要な工具・部品リスト
- **例**: "Nintendo Switchの電源が入らない" → 充電ケーブル確認手順

#### 2.1.2 画像ベース診断
- **入力**: デバイス画像（最大3枚、5MB以内）
- **出力**: 視覚的問題の特定、修理手順
- **対応形式**: JPEG, PNG, WEBP

#### 2.1.3 対話型修理ガイダンス
- **機能**: ステップバイステップの修理指導
- **安全警告**: 危険な作業の事前通知
- **進捗管理**: 修理手順の完了状況追跡

### 2.2 補助機能

#### 2.2.1 修理データ管理
- iFixit APIからの修理手順データ取得
- ユーザー投稿による修理ログ蓄積
- 修理成功率の統計管理

#### 2.2.2 ユーザー管理
- 修理履歴の保存
- よくある質問の学習
- フィードバック収集

## 3. 非機能要件

### 3.1 パフォーマンス要件
- **レスポンス時間**: 一般的な質問 < 5秒
- **画像処理時間**: < 10秒
- **同時接続数**: 100ユーザー（初期目標）

### 3.2 可用性要件
- **稼働率**: 99.0%以上（月間）
- **メンテナンス**: 週次メンテナンス時間 < 2時間

### 3.3 セキュリティ要件
- APIキーの環境変数管理
- ユーザー画像の一時保存（24時間後自動削除）
- 修理データの暗号化保存

### 3.4 拡張性要件
- 新しいデバイスカテゴリの追加対応
- 多言語対応（日本語、英語）
- 外部修理データソースの追加

## 4. 技術要件

### 4.1 技術スタック詳細

#### 開発言語・フレームワーク
- **Backend**: Python 3.9+
- **Frontend**: Streamlit 1.25+
- **Web Framework**: FastAPI 0.100+
- **LLM Integration**: OpenAI API, Claude API
- **Database**: SQLite（開発）、PostgreSQL（本番）

#### 主要ライブラリ
- **データ処理**: pandas, numpy
- **画像処理**: Pillow, OpenCV
- **HTTP クライアント**: httpx, requests
- **データベース**: SQLAlchemy, alembic
- **認証**: python-jose, passlib
- **テスト**: pytest, pytest-cov
- **コード品質**: flake8, black, isort, mypy
- **セキュリティ**: bandit, safety

### 4.2 外部API依存
- **iFixit API**: 修理手順データ
- **OpenAI/Claude API**: 自然言語処理
- **Vision API**: 画像解析

### 4.3 インフラ要件
- **開発環境**: ローカル開発
- **本番環境**: Docker + Cloud Platform
- **CI/CD**: GitHub Actions

## 5. データ要件

### 5.1 修理データ構造
```json
{
  "id": "repair_001",
  "device": "Nintendo Switch",
  "category": "power_issue",
  "symptoms": ["電源が入らない", "充電ランプが点灯しない"],
  "difficulty": "beginner",
  "estimated_time": "30分",
  "tools_required": ["プラスドライバー", "マルチメーター"],
  "parts_required": ["充電ケーブル"],
  "steps": [
    {
      "step": 1,
      "description": "充電ケーブルを確認",
      "warning": "作業前に電源を完全に切断してください"
    }
  ],
  "success_rate": 0.85,
  "created_at": "2024-01-01T00:00:00Z"
}
```

### 5.2 ユーザーセッション管理
- セッションID管理
- 会話履歴の保存（最大100件）
- 画像データの一時保存

## 6. ユーザーインターフェース要件

### 6.1 画面構成
1. **メイン画面**: デバイス選択 + チャットエリア
2. **画像アップロード**: ドラッグ&ドロップ対応
3. **修理手順表示**: ステップバイステップ表示
4. **履歴画面**: 過去の相談履歴

### 6.2 レスポンシブデザイン
- **PC**: 1200px以上
- **タブレット**: 768px-1199px
- **スマートフォン**: 767px以下

## 7. 品質要件

### 7.1 テストカバレッジ
- **ユニットテスト**: 80%以上
- **統合テスト**: 主要機能の動作確認
- **E2Eテスト**: ユーザーシナリオテスト

### 7.2 品質基準
- **修理アドバイス正確性**: 70%以上
- **ユーザー満足度**: 4.0/5.0以上
- **エラー率**: 5%以下

## 8. 制約事項

### 8.1 技術的制約
- LLMのAPI利用料金制限
- 画像処理の計算資源制限
- 外部API依存によるダウンタイム

### 8.2 法的制約
- 修理による怪我・損害の免責事項
- データプライバシーの保護
- 各国の修理権利法への対応

## 9. 成功指標

### 9.1 定量指標
- **月間アクティブユーザー**: 1,000人（6ヶ月後）
- **修理成功率**: 60%以上
- **ユーザー継続率**: 30%以上

### 9.2 定性指標
- ユーザーフィードバックの改善
- 修理コミュニティでの認知度向上
- 持続可能な修理文化への貢献

## 10. リリース計画

### 10.1 Phase 1（MVP）
- 基本的なチャットボット機能
- 3デバイスの対応
- 画像アップロード機能

### 10.2 Phase 2（機能拡張）
- LoRAファインチューニング
- 追加デバイス対応
- コミュニティ機能

### 10.3 Phase 3（本格運用）
- 商用化検討
- 多言語対応
- エンタープライズ機能